# BFF

BFF，即 Backend For Frontend（服务于前端的后端），也就是服务器设计 API 时会考虑前端的使用，并在服务端直接进行业务逻辑的处理，又称为用户体验适配器。

概念上，把每个前端应用拆成两部分:客户端应用与服务端的部分(BFF)。其中， BFF是面向特定用户体验的，由实 现这部分UI的前端团队负责实现及维护(即UI与对应的BFF由同一个团队负责)

从服务的角度看，BFF实际上是限制了单一服务所支持的消费者(指前端应用)数量，从而让它们更易于使用(更贴合 前端需要)和更改，并帮助开发前端应用的团队保留更多的自主权

## 演化史

- 最开始的站点是简单的静态网站。后端大哥把.html文件推送给用户，用户浏览器解析这些字符串进行显示。

- 前后端分离，大家各做个的，彼此之间通过基于HTTP的各种API协作，变成了数据动态生成的新一代站点。

- 各种API协作提供给兼容不同端/模块/产品的接口

- 将API细化按端/模块/产品分割成不同服务接口

- 面向特定端/模块/产品用户体验的整合成特定的API

## 优缺点

**优点：**

- 前后端彻底分离，即便是后期有微服务迁移，也不需改动前端代码
- 业务更向前靠拢，琐碎的api由前端开发自己决定，更适配前端框架
- BFF可以自开mock，插件也能生成API文档，相比后端单开这类服务要方便些吧
- 留给后端更清晰的服务边界，只需要提供粗粒度的接口即可

**缺点：**

- 中间层转发会增加请求延迟。
- 需要保证端到端测试
- 必须随时准备好后端异常请求
- BFF分成会增加开发成本

**正确姿势：**

- 多端应用
- 服务聚合，随着微服务的兴起，原本在同一个进程内运行的业务流程被拆分到了不同的服务中。BFF 的出现为前端应用提供了一个对业务服务调用的聚合点，它屏蔽了复杂的服务调用链，让前端可以聚焦在所需要的数据上，而不用关注底层提供这些数据的服务。
- 非必要，莫新增，如果与已有 BFF 功能类似，且展现数据的要求也相近的话，一定要谨慎对待新增 BFF 的行为
