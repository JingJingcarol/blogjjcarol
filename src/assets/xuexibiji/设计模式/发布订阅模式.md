# 发布订阅模式

发布订阅模式中，称为发布者的消息发送者不会将消息直接发送给订阅者，这意味着发布者和订阅者不知道彼此的存在。在发布者和订阅者之间存在第三个组件，称为消息代理或调度中心或中间件，它维持着发布者和订阅者之间的联系，过滤所有发布者传入的消息并相应地分发它们给订阅者。

发布订阅模式是最常用的一种观察者模式的实现，并且从解耦和重用角度来看，更优于典型的观察者模式

订阅者（Subscriber）把自己想订阅的事件注册（Subscribe）到调度中心（Topic），当发布者（Publisher）发布该事件（Publish topic）到调度中心，也就是该事件触发时，由调度中心统一调度（Fire Event）订阅者注册到调度中心的处理代码。

## 代码实现

以dom事件为例

```javascript
$('#id').on('custom-event',function(e,msg){
    console.log(`监听到custom-event事件变化:${msg}`)
})

$('#id').trigger('custom-event','啦啦啦')
// 监听到custom-event事件变化:啦啦啦
```

其中 调度中心 是 浏览器的dom事件队列，当事件被触发时，浏览器调度执行注册监听的方法

- 观察者模式里，只有两个角色 —— 观察者 + 被观察者

    而发布订阅模式里，却不仅仅只有发布者和订阅者两个角色，相比观察者模式多了一个中间件订阅器

- 在发布订阅模式里，发布者，并不会直接通知订阅者，换句话说，发布者和订阅者，彼此互不相识。
    而观察者模式里，当被观察者发生变化时，要主动通知所有观察者
